# LangChain æ™ºèƒ½ä»£ç†é¡¹ç›®

è¿™æ˜¯ä¸€ä¸ªåŸºäº LangChain æ¡†æ¶çš„æ™ºèƒ½ä»£ç†ç¤ºä¾‹é¡¹ç›®ï¼Œå±•ç¤ºäº†å¦‚ä½•å¿«é€Ÿæ„å»ºå¼ºå¤§çš„ AI åº”ç”¨ã€‚

## ğŸ“‹ é¡¹ç›®ç‰¹ç‚¹

- âœ… ç®€å•æ˜“ç”¨çš„ä»£ç†åˆ›å»º
- âœ… å¤šä¸ªè‡ªå®šä¹‰å·¥å…·ç¤ºä¾‹
- âœ… æµå¼è¾“å‡ºæ”¯æŒ
- âœ… å®Œæ•´çš„é”™è¯¯å¤„ç†
- âœ… æ¨¡å—åŒ–è®¾è®¡

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### 2. é…ç½® API Key

å¤åˆ¶ `.env.example` æ–‡ä»¶ä¸º `.env`ï¼Œå¹¶å¡«å…¥ä½ çš„ API Keyï¼š

```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š

```
ANTHROPIC_API_KEY=your_actual_api_key_here
```

### 3. è¿è¡Œç¤ºä¾‹

#### åŸºç¡€ä»£ç†ç¤ºä¾‹

```bash
python main.py
```

è¿™ä¸ªç¤ºä¾‹å±•ç¤ºäº†ä¸€ä¸ªé…å¤‡å¤©æ°”æŸ¥è¯¢ã€è®¡ç®—å™¨å’Œæœç´¢åŠŸèƒ½çš„æ™ºèƒ½ä»£ç†ã€‚

#### æµå¼è¾“å‡ºç¤ºä¾‹

```bash
python streaming_example.py
```

å±•ç¤ºå¦‚ä½•å®æ—¶è·å–ä»£ç†çš„å“åº”ï¼Œæä¾›æ›´å¥½çš„ç”¨æˆ·ä½“éªŒã€‚

#### é«˜çº§å·¥å…·ç¤ºä¾‹

```bash
python custom_tools.py
```

æ¼”ç¤ºå¦‚ä½•åˆ›å»ºå’Œä½¿ç”¨æ›´å¤æ‚çš„è‡ªå®šä¹‰å·¥å…·ï¼ŒåŒ…æ‹¬æ—¶é—´æŸ¥è¯¢ã€æ•°æ®æ ¼å¼åŒ–ã€ç¿»è¯‘å’Œå¾…åŠäº‹é¡¹ç®¡ç†ã€‚

## ğŸ“š é¡¹ç›®ç»“æ„

```
line/
â”œâ”€â”€ main.py                 # åŸºç¡€ä»£ç†ç¤ºä¾‹
â”œâ”€â”€ streaming_example.py    # æµå¼è¾“å‡ºç¤ºä¾‹
â”œâ”€â”€ custom_tools.py        # é«˜çº§è‡ªå®šä¹‰å·¥å…·ç¤ºä¾‹
â”œâ”€â”€ requirements.txt       # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ .env.example          # ç¯å¢ƒå˜é‡ç¤ºä¾‹
â”œâ”€â”€ .env                  # ç¯å¢ƒå˜é‡ï¼ˆéœ€è¦è‡ªå·±åˆ›å»ºï¼‰
â”œâ”€â”€ .gitignore           # Git å¿½ç•¥æ–‡ä»¶
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## ğŸ› ï¸ æ ¸å¿ƒåŠŸèƒ½

### 1. æ™ºèƒ½ä»£ç†

ä½¿ç”¨ LangChain çš„ `create_agent` å¿«é€Ÿåˆ›å»ºæ™ºèƒ½ä»£ç†ï¼š

```python
agent = create_agent(
    model="anthropic:claude-sonnet-4-5",
    tools=[get_weather, calculate, search_info],
    system_prompt="ä½ æ˜¯ä¸€ä¸ªä¹äºåŠ©äººçš„æ™ºèƒ½åŠ©æ‰‹ã€‚",
)
```

### 2. è‡ªå®šä¹‰å·¥å…·

è½»æ¾åˆ›å»ºè‡ªå®šä¹‰å·¥å…·å‡½æ•°ï¼š

```python
def get_weather(city: str) -> str:
    """è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯"""
    return f"{city} å¤©æ°”æ€»æ˜¯æ™´æœ—ï¼"
```

### 3. æµå¼è¾“å‡º

æ”¯æŒå®æ—¶æµå¼å“åº”ï¼š

```python
for chunk in agent.stream({"messages": [{"role": "user", "content": query}]}):
    print(chunk, end="", flush=True)
```

## ğŸ”§ è‡ªå®šä¹‰æ‰©å±•

### æ·»åŠ æ–°å·¥å…·

1. åœ¨ç›¸åº”çš„æ–‡ä»¶ä¸­å®šä¹‰æ–°çš„å·¥å…·å‡½æ•°
2. åœ¨åˆ›å»ºä»£ç†æ—¶å°†å·¥å…·æ·»åŠ åˆ° `tools` åˆ—è¡¨
3. æ›´æ–° `system_prompt` æ¥æè¿°æ–°å·¥å…·çš„åŠŸèƒ½

### æ›´æ¢æ¨¡å‹

æ”¯æŒå¤šç§æ¨¡å‹æä¾›å•†ï¼š

- **Anthropic**: `anthropic:claude-sonnet-4-5`
- **OpenAI**: `openai:gpt-4`
- **Google**: `google:gemini-pro`

åªéœ€ä¿®æ”¹ `model` å‚æ•°å¹¶é…ç½®ç›¸åº”çš„ API Keyã€‚

## ğŸ“– å­¦ä¹ èµ„æº

- [LangChain å®˜æ–¹æ–‡æ¡£](https://python.langchain.com/)
- [LangChain ä¸­æ–‡æ–‡æ¡£](https://langchain-doc.cn/)
- [LangGraph æ–‡æ¡£](https://langchain-ai.github.io/langgraph/)

## âš ï¸ æ³¨æ„äº‹é¡¹

1. è¯·å¦¥å–„ä¿ç®¡ä½ çš„ API Keyï¼Œä¸è¦ä¸Šä¼ åˆ°å…¬å…±ä»“åº“
2. æ³¨æ„ API è°ƒç”¨å¯èƒ½äº§ç”Ÿè´¹ç”¨
3. ç¤ºä¾‹ä¸­çš„æŸäº›åŠŸèƒ½ï¼ˆå¦‚å¤©æ°”æŸ¥è¯¢ã€æœç´¢ï¼‰ä½¿ç”¨çš„æ˜¯æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…ä½¿ç”¨æ—¶éœ€è¦é›†æˆçœŸå® API

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License
